import{a as v,j as x,F as m,d as g,e as d,p as _,q as h,a_ as b,R,b9 as O}from"./index-12050af9.js";var C=function(n){v(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.highlightIndex=-1,t.prevIndex=-1,t}return e.prototype.chartRef=function(t){var i=this,o;this.chart=t,(o=this.chart)===null||o===void 0||o.on("click","series",function(r){i.props.onToggle(i.props.options[r.dataIndex])}),setTimeout(function(){return i.highlight()})},e.prototype.highlight=function(t){t===void 0&&(t=this.highlightIndex),!this.props.static&&(this.highlightIndex=t,!(!this.chart||this.prevIndex===t)&&(~this.prevIndex&&this.chart.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:this.prevIndex}),~t&&(this.chart.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:t}),this.props.showTooltipOnHighlight&&this.chart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:t})),this.prevIndex=t))},e.prototype.componentDidMount=function(){this.props.selectedOptions.length&&this.highlight(this.props.options.indexOf(this.props.selectedOptions[0]))},e.prototype.componentDidUpdate=function(){this.props.selectedOptions.length&&this.highlight(this.props.options.indexOf(this.props.selectedOptions[0]))},e.prototype.renderStatic=function(t){t===void 0&&(t="-"),this.prevIndex=-1,this.highlightIndex=-1;var i=this.props,o=i.options,r=o===void 0?[]:o,s=i.selectedOptions,p=i.labelField,l=p===void 0?"label":p,a=i.valueField,c=a===void 0?"value":a,u=i.chartValueField;if(r.length&&s.length){var f=r.reduce(function(y,I){return y+I[u||c]},0);if(f>0){var F=(+s[0][u||c]/f*100).toFixed(2);t="".concat(s[0][l],"：").concat(F,"%")}}return x(m,{children:t})},e.prototype.render=function(){var t=this.props,i=t.options,o=t.labelField,r=t.chartValueField,s=t.valueField,p=t.render,l=g(g({legend:{top:10},tooltip:{formatter:function(a){return"".concat(a.name,"：").concat(a.value[r||s||"value"],"（").concat(a.percent,"%）")}},series:[{type:"pie",top:30,bottom:0}]},this.props.config),{dataset:{dimensions:[o||"label",r||s||"value"],source:i}});return p("chart",{type:"chart"},{config:l,chartRef:this.chartRef})},d([_,h("design:type",Function),h("design:paramtypes",[Object]),h("design:returntype",void 0)],e.prototype,"chartRef",null),d([b(),h("design:type",Function),h("design:paramtypes",[]),h("design:returntype",void 0)],e.prototype,"render",null),e}(R.Component),T=function(n){v(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.defaultProps={multiple:!1},e=d([O({type:"chart-radios",sizeMutable:!1})],e),e}(C);export{T as RadiosControlRenderer,C as default};

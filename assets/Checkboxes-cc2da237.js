import{g as G,bp as U,bq as V,a as q,R as j,aq as H,b2 as J,l as T,j as b,aN as L,E as K,br as M,I as E,bs as P,bt as Q,bu as X,U as Y,d as w,S as Z,V as ee,e as k,p as N,q as i,a_ as te,b9 as ne}from"./index-12050af9.js";var ae=Math.max,le=Math.min;function se(h,n,e){return h>=le(n,e)&&h<ae(n,e)}var oe=se,ie=oe,$=U,re=V;function ce(h,n,e){return n=$(n),e===void 0?(e=n,n=0):e=$(e),h=re(h),ie(h,n,e)}var de=ce;const he=G(de);var pe=function(h){q(n,h);function n(){var e=h!==null&&h.apply(this,arguments)||this;return e.checkboxRef=j.createRef(),e.childRefs=[],e}return n.prototype.doAction=function(e,t,s){var o,a,l=this.props,d=l.resetValue,p=l.onChange,r=l.formStore,u=l.store,f=l.name,C=e==null?void 0:e.actionType;if(C==="clear")p("");else if(C==="reset"){var v=(a=H((o=r==null?void 0:r.pristine)!==null&&o!==void 0?o:u==null?void 0:u.pristine,f))!==null&&a!==void 0?a:d;p(v??"")}},n.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},n.prototype.handleAddClick=function(){var e=this.props.onAdd;e&&e()},n.prototype.handleEditClick=function(e,t){var s=this.props.onEdit;e.preventDefault(),e.stopPropagation(),s&&s(t)},n.prototype.handleDeleteClick=function(e,t){var s=this.props.onDelete;e.preventDefault(),e.stopPropagation(),s&&s(t)},n.prototype.componentDidMount=function(){this.updateBorderStyle();var e=J(this.updateBorderStyle,100);this.checkboxRef.current&&(this.checkboxRefObserver=new ResizeObserver(e),this.checkboxRefObserver.observe(this.checkboxRef.current))},n.prototype.componentWillUnmount=function(){var e;(e=this.checkboxRefObserver)===null||e===void 0||e.disconnect()},n.prototype.updateBorderStyle=function(){if(this.props.optionType==="button"&&this.childRefs.length){var e=this.childRefs.map(function(r){return r==null?void 0:r.ref}),t=e[0].labelRef.current.offsetTop,s=[],o=e.length;s[0]="first";for(var a=0,l=1;l<o;l++){var d=e[l],p=d.labelRef.current.offsetTop;s[l]="",p!==t&&(s[l]="first",s[l-1]+=" last",a=l,t=p)}s[o-1]+=" last",s.forEach(function(r,u){u>=a&&(r+=" last-line"),e[u].setClassName(r)})}},n.prototype.renderGroup=function(e,t){var s=this,o,a=this.props,l=a.classnames,d=a.labelField;if(!(!((o=e.children)===null||o===void 0)&&o.length))return null;var p=e.children.map(function(u,f){return s.renderItem(u,f)}),r=this.columnsSplit(p);return T("div",{className:l("CheckboxesControl-group",e.className),children:[b("label",{className:l("CheckboxesControl-groupLabel",e.labelClassName),children:e[d||"label"]}),r]},"group-"+t)},n.prototype.addChildRefs=function(e){e&&this.childRefs.push(e)},n.prototype.renderItem=function(e,t){var s=this,o;if(!((o=e.children)===null||o===void 0)&&o.length)return this.renderGroup(e,t);var a=this.props,l=a.render,d=a.itemClassName,p=a.onToggle,r=a.selectedOptions,u=a.disabled,f=a.inline,C=a.labelClassName,v=a.labelField,S=a.removable,F=a.editable,A=a.translate,O=a.optionType,g=a.menuTpl,I=a.data,y=a.testIdBuilder,_=String(e[v||"label"]),B=e.labelClassName,R=y==null?void 0:y.getChild("item-"+_||t);return T(L,{className:d,onChange:function(){return p(e)},checked:!!~r.indexOf(e),disabled:u||e.disabled,inline:f,labelClassName:B||C,description:e.description,optionType:O,testIdBuilder:R,ref:this.addChildRefs,children:[g?l("checkboxes/".concat(t),g,{data:K(I,e)}):_,S&&M(e,"removable")?b("a",{"data-tooltip":A("Select.clear"),"data-position":"left",children:b(E,{icon:"minus",className:"icon",onClick:function(x){return s.handleDeleteClick(x,e)}})}):null,F&&M(e,"editable")?b("a",{"data-tooltip":"编辑","data-position":"left",children:b(E,{icon:"pencil",className:"icon",onClick:function(x){return s.handleEditClick(x,e)}})}):null]},t)},n.prototype.columnsSplit=function(e){var t=this.props,s=t.columnsCount,o=t.classnames,a=[],l=[];return e.forEach(function(d){d&&d.key&&String(d.key).startsWith("group")?(l.length&&(a.push(P(l,o,s)),l=[]),a.push(d)):l.push(d)}),l.length&&a.push(P(l,o,s)),a},n.prototype.render=function(){var e=this,t=this.props,s=t.className;t.style;var o=t.disabled,a=t.placeholder,l=t.options,d=t.inline;t.columnsCount;var p=t.selectedOptions;t.onToggle;var r=t.onToggleAll,u=t.checkAll,f=t.checkAllText,C=t.classnames,v=t.itemClassName,S=t.labelClassName,F=t.creatable,A=t.addApi,O=t.createBtnLabel,g=t.translate,I=t.optionType,y=t.loading,_=t.loadingConfig,B=t.themeCss,R=t.id,x=t.env,c=t.classPrefix,m=[];l&&l.length&&(m=l.map(function(z,W){return e.renderItem(z,W)})),u&&m.length&&I==="default"&&m.unshift(b(L,{className:v,onChange:r,checked:!!p.length,partial:he(p.length,0,Q(l).length),disabled:o,inline:d,labelClassName:S,children:f??g("Checkboxes.selectAll")},"checkall")),m=this.columnsSplit(m);var D=X(B,"checkboxes");return T("div",{className:C("CheckboxesControl",s,Y(w(w({},this.props),{name:["checkboxesControlClassName","checkboxesControlCheckedClassName","checkboxesClassName","checkboxesCheckedClassName","checkboxesInnerClassName","checkboxesShowClassName"],id:R,themeCss:D}))),ref:this.checkboxRef,children:[m&&m.length?m:y?null:b("span",{className:"Form-placeholder",children:g(a)}),y?b(Z,{show:!0,icon:"reload",size:"sm",spinnerClassName:C("Checkboxes-spinner"),loadingConfig:_}):null,(F||A)&&!o?T("a",{className:C("Checkboxes-addBtn"),onClick:this.handleAddClick,children:[b(E,{icon:"plus",className:"icon"}),g(O)]}):null,b(ee,{...w({},this.props,{config:{themeCss:D,classNames:[{key:"checkboxesControlClassName",weights:{default:{inner:".".concat(c,"Checkbox:not(.checked):not(.disabled)")},hover:{suf:" .".concat(c,"Checkbox:not(.disabled):not(.checked)")},disabled:{inner:".".concat(c,"Checkbox.disabled:not(.checked)")}}},{key:"checkboxesControlCheckedClassName",weights:{default:{inner:".".concat(c,"Checkbox.checked:not(.disabled)")},hover:{suf:" .".concat(c,"Checkbox.checked:not(.disabled)")},disabled:{inner:".".concat(c,"Checkbox.checked.disabled")}}},{key:"checkboxesClassName",weights:{default:{inner:".".concat(c,"Checkbox:not(.checked):not(.disabled) > i")},hover:{suf:" .".concat(c,"Checkbox:not(.disabled):not(.checked)"),inner:"> i"},disabled:{inner:".".concat(c,"Checkbox.disabled:not(.checked) > i")}}},{key:"checkboxesCheckedClassName",weights:{default:{inner:".".concat(c,"Checkbox:not(.disabled) > i")},hover:{suf:" .".concat(c,"Checkbox:not(.disabled)"),inner:"> i"},disabled:{inner:".".concat(c,"Checkbox.disabled > i")}}},{key:"checkboxesInnerClassName",weights:{default:{inner:".".concat(c,"Checkbox:not(.disabled) > i .icon")},hover:{suf:" .".concat(c,"Checkbox:not(.disabled)"),inner:"> i .icon"},disabled:{inner:".".concat(c,"Checkbox.disabled > i .icon")}}},{key:"checkboxesShowClassName",weights:{default:{inner:".".concat(c,"Checkbox > i")}}}],id:R},env:x})})]})},n.defaultProps={columnsCount:1,multiple:!0,placeholder:"placeholder.noOption",creatable:!1,inline:!0,createBtnLabel:"Select.createLabel",optionType:"default"},k([N,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],n.prototype,"handleAddClick",null),k([N,i("design:type",Function),i("design:paramtypes",[Event,Object]),i("design:returntype",void 0)],n.prototype,"handleEditClick",null),k([N,i("design:type",Function),i("design:paramtypes",[Event,Object]),i("design:returntype",void 0)],n.prototype,"handleDeleteClick",null),k([N,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],n.prototype,"updateBorderStyle",null),k([N,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],n.prototype,"addChildRefs",null),k([te(),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],n.prototype,"render",null),n}(j.Component),be=function(h){q(n,h);function n(){return h!==null&&h.apply(this,arguments)||this}return n=k([ne({type:"checkboxes",sizeMutable:!1,thin:!0})],n),n}(pe);export{be as CheckboxesControlRenderer,pe as default};

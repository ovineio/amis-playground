import{a as _,R as L,a1 as w,Y as v,_ as x,k as b,l as y,i as z,e as R,ac as S,bl as k,h as H,j as A}from"./index-8d6c2236.js";var M=function(m){_(o,m);function o(t){var e=m.call(this,t)||this;return e.toDispose=[],e.codeRef=L.createRef(),e}return o.prototype.shouldComponentUpdate=function(t){return w(o.propsList,this.props,t)||this.resolveLanguage(this.props)!==this.resolveLanguage(t)||v(this.props)!==v(t)},o.prototype.componentDidMount=function(){var t=this;x(()=>import("./index-8d6c2236.js").then(e=>e.ej),["./index-8d6c2236.js","./index-2b7d5b07.css"],import.meta.url).then(function(e){return t.handleMonaco(e)})},o.prototype.componentDidUpdate=function(t){var e,a;return b(this,void 0,void 0,function(){var i,n,r,l,s,u,d;return y(this,function(c){switch(c.label){case 0:return i=this.props,n=this.codeRef.current,!((e=this===null||this===void 0?void 0:this.monaco)===null||e===void 0)&&e.editor&&n?(r=i.tabSize,l=(a=v(this.props))!==null&&a!==void 0?a:"",s=this.resolveLanguage(),u=this.registerAndGetTheme(),this.monaco.editor.setTheme(u),[4,this.monaco.editor.colorize(l,s,{tabSize:r})]):[3,2];case 1:d=c.sent(),n.innerHTML=d,c.label=2;case 2:return[2]}})})},o.prototype.handleMonaco=function(t){var e,a;return b(this,void 0,void 0,function(){var i,n,r,l,s,u;return y(this,function(d){switch(d.label){case 0:return t?(this.monaco=t,i=this.props.tabSize,n=(e=v(this.props))!==null&&e!==void 0?e:"",r=this.resolveLanguage(),l=this.codeRef.current,l&&(!((a=this.monaco)===null||a===void 0)&&a.editor)?(s=this.registerAndGetTheme(),this.monaco.editor.setTheme(s),[4,this.monaco.editor.colorize(n,r,{tabSize:i})]):[3,2]):[2];case 1:u=d.sent(),l.innerHTML=u,d.label=2;case 2:return[2]}})})},o.prototype.resolveLanguage=function(t){var e=t??this.props,a=e.customLang,i=e.data,n=e.language,r=n===void 0?"plaintext":n;return z(r)&&(r=R(r,i)),a&&a.name&&(r=a.name),r},o.prototype.registerAndGetTheme=function(){var t,e,a,i,n=this.monaco,r=this.props,l=r.theme,s=r.editorTheme;if(s=s||(l==="dark"?"vs-dark":"vs"),!n)return s;if(this.customLang&&this.customLang.name&&Array.isArray(this.customLang.tokens)&&this.customLang.tokens.length){var u=this.customLang.name,d=!((a=this.customLang)===null||a===void 0)&&a.colors&&S((i=this.customLang)===null||i===void 0?void 0:i.colors)?this.customLang.colors:{};n.languages.register({id:u});var c=[],f=[];try{for(var g=k(this.customLang.tokens),h=g.next();!h.done;h=g.next()){var p=h.value,C=new RegExp(p.regex,p.regexFlags||void 0);c.push([C,p.name]),f.push({token:p.name,foreground:p.color,background:p.background,fontStyle:p.fontStyle})}}catch(T){t={error:T}}finally{try{h&&!h.done&&(e=g.return)&&e.call(g)}finally{if(t)throw t.error}}return n.languages.setMonarchTokensProvider(u,{tokenizer:{root:c}}),n.editor.defineTheme(u,{base:"vs",inherit:!1,rules:f,colors:d}),u}return s},o.prototype.render=function(){var t=v(this.props),e=this.props,a=e.className,i=e.maxHeight,n=e.style,r=n===void 0?{}:n,l=e.classnames,s=e.editorTheme,u=e.customLang,d=e.wordWrap,c=e.wrapperComponent,f=this.resolveLanguage(),g=typeof t=="string"&&t.split(/\r?\n/).length>1,h=c||(g?"pre":"code");return u&&(this.customLang=u),i&&(r.maxHeight=r.maxHeight||i,r.overflow="auto"),L.createElement(h,{ref:this.codeRef,className:l("Code",{"Code--dark":s&&["vs-dark","hc-black"].includes(s),"Code-pre-wrap":h==="pre","word-break":d},a),style:r,"data-lang":f},t)},o.propsList=["language","editorTheme","tabSize","wordWrap","customLang","style"],o.defaultProps={language:"plaintext",tabSize:4,wordWrap:!0},o}(L.Component),D=function(m){_(o,m);function o(){return m!==null&&m.apply(this,arguments)||this}return o=H([A({type:"code"})],o),o}(M);export{D as CodeRenderer,M as default};

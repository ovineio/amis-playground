import{a as _,an as F,h as g,j as m,i as V,r as w,cd as B,e as S,f as D,F as N,W as E}from"./index-d5f8b387.js";const y=window.React;function b(r,o){if(r&&typeof r!="string"&&(r=JSON.stringify(r,null,2)),o&&o==="json")try{r=JSON.stringify(typeof r=="string"?JSON.parse(r):r,null,2)}catch{}return r||""}var C=function(r){_(o,r);function o(t){var e=r.call(this,t)||this;return e.state={focused:!1},e.handleFocus=e.handleFocus.bind(e),e.handleBlur=e.handleBlur.bind(e),e.handleEditorMounted=e.handleEditorMounted.bind(e),e.handleChange=e.handleChange.bind(e),e}return o.prototype.doAction=function(t,e,a,d){var n,i,s=t==null?void 0:t.actionType,l=this.props,u=l.onChange,f=l.resetValue,c=l.formStore,h=l.store,v=l.name;if(s==="clear")u("");else if(s==="reset"){var p=(i=F((n=c==null?void 0:c.pristine)!==null&&n!==void 0?n:h==null?void 0:h.pristine,v))!==null&&i!==void 0?i:f;u(p??"")}else s==="focus"&&this.focus()},o.prototype.focus=function(){var t,e,a;(t=this.editor)===null||t===void 0||t.focus(),this.setState({focused:!0});var d=(e=this.editor)===null||e===void 0?void 0:e.getPosition();(a=this.editor)===null||a===void 0||a.setPosition(d)},o.prototype.handleFocus=function(t){return g(this,void 0,void 0,function(){var e,a,d,n,i;return m(this,function(s){switch(s.label){case 0:return e=this.props,a=e.dispatchEvent,d=e.value,n=e.onFocus,this.setState({focused:!0}),[4,a("focus",E(this.props,{value:d}))];case 1:return i=s.sent(),i!=null&&i.prevented?[2]:(n==null||n(t),[2])}})})},o.prototype.handleBlur=function(t){return g(this,void 0,void 0,function(){var e,a,d,n,i;return m(this,function(s){switch(s.label){case 0:return e=this.props,a=e.dispatchEvent,d=e.value,n=e.onBlur,this.setState({focused:!1}),[4,a("blur",E(this.props,{value:d}))];case 1:return i=s.sent(),i!=null&&i.prevented?[2]:(n==null||n(t),[2])}})})},o.prototype.handleChange=function(t){return g(this,void 0,void 0,function(){var e,a,d,n;return m(this,function(i){switch(i.label){case 0:return e=this.props,a=e.onChange,d=e.dispatchEvent,[4,d("change",E(this.props,{value:t}))];case 1:return n=i.sent(),n!=null&&n.prevented?[2]:(a&&a(t),[2])}})})},o.prototype.handleEditorMounted=function(t){this.editor=t},o.prototype.render=function(){var t=this.props,e=t.className;t.style;var a=t.value;t.onChange;var d=t.disabled,n=t.size,i=t.options,s=t.language,l=t.editorTheme,u=t.diffValue,f=t.classnames,c=t.data,h=V(u)?b(w(u||"",c,"| raw"),s):b(u,s),v=b(a,s);return y.createElement("div",{className:f("EditorControl",n?"EditorControl--".concat(n):"",e,{"is-focused":this.state.focused})},y.createElement(B,{value:v,originValue:h,onChange:this.handleChange,disabled:d,language:s,editorTheme:l,options:i,onFocus:this.handleFocus,onBlur:this.handleBlur,editorDidMount:this.handleEditorMounted}))},o.defaultProps={language:"javascript",editorTheme:"vs",options:{automaticLayout:!1,selectOnLineNumbers:!0,scrollBeyondLastLine:!1,folding:!0,minimap:{enabled:!1}},diffValue:""},o}(y.Component),P=function(r){_(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o.defaultProps=S({},C.defaultProps),o=D([N({type:"diff-editor",sizeMutable:!1})],o),o}(C);export{P as DiffEditorControlRenderer,C as DiffEditorRenderer};

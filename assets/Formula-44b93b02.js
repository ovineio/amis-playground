import{a as m,b6 as v,cC as l,a2 as y,l as p,f as c,o as S,p as s,F as g}from"./index-d5f8b387.js";const C=window.React;var F=function(r){m(n,r);function n(){var t=r!==null&&r.apply(this,arguments)||this;return t.inited=!1,t}return n.prototype.componentDidMount=function(){var t=this.props,i=t.formInited,a=t.initSet,o=t.addHook;this.unHook=o?o(this.handleFormInit,"init"):void 0,i!==!1&&(this.inited=!0,a===!1||this.initSet())},n.prototype.componentDidUpdate=function(t){var i=this.props,a=i.formInited,o=i.initSet,e=i.autoSet;this.inited?e===!1||this.autoSet(t):typeof a>"u"&&(this.inited=!0,o===!1||this.initSet())},n.prototype.componentWillUnmount=function(){var t;(t=this.unHook)===null||t===void 0||t.call(this)},n.prototype.handleFormInit=function(t){this.inited=!0;var i=this.props,a=i.name,o=i.initSet;if(o!==!1){var e=this.initSet();typeof a=="string"&&typeof e<"u"&&v(t,a,e)}},n.prototype.initSet=function(){var t=this.props,i=t.formula,a=t.data,o=t.setPrinstineValue;t.initSet;var e=t.condition;if(i){if(e&&!~e.indexOf("$")&&!~e.indexOf("<%")&&!l(e,a))return}else return;var f=l(i,a);return f!==null&&(o==null||o(f)),f},n.prototype.autoSet=function(t){var i=this.props,a=t.formula,o=t.data,e=t.onChange,f=t.value,u=t.condition;if(a&&i.formula&&y(o,i.data,!1)&&f===i.value){var d=l(i.formula,i.data);if(u&&i.condition)~u.indexOf("$")||~u.indexOf("<%")?p(u,o)!==p(i.condition,i.data)&&e(d):l(i.condition,i.data)&&e(d);else{var h=l(a,o);JSON.stringify(h)!==JSON.stringify(d)&&e(d??"")}}},n.prototype.doAction=function(){var t=this.props,i=t.formula,a=t.data,o=t.onChange;t.autoSet,t.value;var e=l(i,a);o(e)},n.prototype.render=function(){return null},c([S,s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],n.prototype,"handleFormInit",null),n}(C.Component),I=function(r){m(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n=c([g({type:"formula",wrap:!1,strictMode:!1,sizeMutable:!1})],n),n}(F);export{I as FormulaControlRenderer,F as default};

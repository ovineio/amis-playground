import{a as g,a0 as F,e as H,ap as k,ag as G,aj as M,cH as A,f as D,F as z}from"./index-d5f8b387.js";const v=window.React;var B=function(l){g(e,l);function e(r){var o=l.call(this,r)||this;return o.toDispose=[],o.handleFocus=o.handleFocus.bind(o),o.handleBlur=o.handleBlur.bind(o),o.validateHook=o.validateHook.bind(o),o.state={isFocused:!1},o}return e.prototype.componentDidMount=function(){var r=this.props,o=r.addHook,t=r.name;t&&o&&this.toDispose.push(o(this.validateHook,"validate"))},e.prototype.componentDidUpdate=function(r){var o;F(["errorCode","delimiter"],r==null?void 0:r.validationConfig,(o=this.props)===null||o===void 0?void 0:o.validationConfig)&&this.validateHook()},e.prototype.componentWillUnmount=function(){this.toDispose.forEach(function(r){return r()}),this.toDispose=[]},e.prototype.getValidationConfig=function(){var r=this.props.validationConfig;return{errorMode:(r==null?void 0:r.errorMode)!=="partial"?"full":"partial",delimiter:r!=null&&r.delimiter&&typeof r.delimiter=="string"?r.delimiter:"; "}},e.prototype.validateHook=function(){var r,o=this.props,t=o.formStore,n=o.formItem,d=o.name,f=this.getValidationConfig().delimiter;if(d){var i=(r=t==null?void 0:t.inputGroupItems)===null||r===void 0?void 0:r[d];if(Array.isArray(i)){var m=i.map(function(s,c){if(s.errors.length<=0)return"";var h=s.label?"(".concat(c+1,")").concat(s.label):"(".concat(c+1,")");return"".concat(h,": ").concat(s.errors.join(f))}).filter(Boolean);n&&n.setError(m)}}},e.prototype.handleFocus=function(){this.setState({isFocused:!0})},e.prototype.handleBlur=function(){this.setState({isFocused:!1})},e.prototype.renderControl=function(r,o,t){var n=this.props,d=n.render,f=n.onChange;if(!r)return null;var i=r;return d("".concat(o),i,H({onChange:f},t))},e.prototype.validate=function(){var r=this.props.formItem,o=[];return r==null||r.subFormItems.forEach(function(t){t.errors.length&&o.push.apply(o,k([],G(t.errors),!1))}),o.length?o:""},e.prototype.render=function(){var r=this,o=this.props,t=o.body,n=o.controls,d=o.className;o.style,o.mode;var f=o.horizontal;o.formMode;var i=o.formHorizontal,m=o.data,s=o.classnames,c=o.static,h=o.disabled,b=o.mobileUI,C=this.getValidationConfig().errorMode,u=Array.isArray(n)?n:t;Array.isArray(u)||(u=[]),u=u.filter(function(a){if(a&&(a.hidden||a.visible===!1))return!1;var p=M(a||{},m);return!(p.hidden||p.visible===!1)});var I=f||(i?A(i,u.length):void 0);return v.createElement("div",{className:s("InputGroup","InputGroup-validation--".concat(C),d,{"is-focused":this.state.isFocused},{"is-mobile":b})},u.map(function(a,p){var _=~["icon","plain","tpl","button","submit","reset"].indexOf(a&&a.type),y=r.renderControl(a,p,{formHorizontal:I,formMode:"normal",inputOnly:!0,inputGroupControl:{name:r.props.name,path:r.props.$path,schema:r.props.$schema},key:p,static:c,disabled:h,onFocus:r.handleFocus,onBlur:r.handleBlur});return _?v.createElement("span",{key:p,className:s(a.addOnclassName,~["button","submit","reset"].indexOf(a&&a.type)?"InputGroup-btn":"InputGroup-addOn")},y):y}))},e.defaultProps={validationConfig:{errorMode:"full",delimiter:"; "}},e}(v.Component),O=function(l){g(e,l);function e(){return l!==null&&l.apply(this,arguments)||this}return e=D([z({type:"input-group",strictMode:!1})],e),e}(B);export{B as InputGroup,O as default};

import{a as X,b2 as Ne,w as ce,E as le,h as O,k as N,b3 as re,j as p,b4 as he,n as $,l as I,d as v,U as M,aK as ve,F as me,b5 as we,I as L,b6 as fe,S as Te,P as Ve,Q as Ie,b7 as Se,V as oe,b8 as Ee,e as D,p as G,q as y,a_ as Pe,R as _e,b9 as ue,ba as Fe,aq as ke,Y as w,al as Ae}from"./index-12050af9.js";var de=function(f){X(s,f);function s(t){var e=f.call(this,t)||this,n=t.value;return e.state={isOpen:!1,inputValue:t.multiple||t.creatable===!1?"":e.valueToString(n),isFocused:!1,revealPassword:!1},e.focus=e.focus.bind(e),e.clearValue=e.clearValue.bind(e),e.toggleRevealPassword=e.toggleRevealPassword.bind(e),e.inputRef=e.inputRef.bind(e),e.handleClick=e.handleClick.bind(e),e.handleFocus=e.handleFocus.bind(e),e.handleBlur=e.handleBlur.bind(e),e.handleInputChange=e.handleInputChange.bind(e),e.handleKeyDown=e.handleKeyDown.bind(e),e.handleChange=e.handleChange.bind(e),e.handleStateChange=e.handleStateChange.bind(e),e.loadAutoComplete=Ne(e.loadAutoComplete.bind(e),250,{trailing:!0,leading:!1}),e}return s.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.formItem,a=e.autoComplete,i=e.addHook,u=e.formInited,r=e.data,o=e.name;ce(a,r)&&n&&(u?n.loadOptions(a,le(r,{term:""})):i&&(this.unHook=i(function(d){return O(t,void 0,void 0,function(){return N(this,function(l){switch(l.label){case 0:return[4,n.loadOptions(a,le(d,{term:""}))];case 1:return l.sent(),n.value&&Fe(d,o,n.value),[2]}})})},"init")))},s.prototype.componentDidUpdate=function(t){var e=this.props;t.value!==e.value&&this.setState({inputValue:e.multiple||e.creatable===!1?"":this.valueToString(e.value)}),t.revealPassword!==e.revealPassword&&!e.revealPassword&&this.setState({revealPassword:!1})},s.prototype.componentWillUnmount=function(){this.unHook&&this.unHook()},s.prototype.inputRef=function(t){this.input=t},s.prototype.doAction=function(t,e,n,a){var i=t==null?void 0:t.actionType;i==="reset"?this.resetValue():i==="clear"?this.clearValue():i==="focus"?this.focus():i==="review"?this.setState({revealPassword:!0}):i==="encrypt"&&this.setState({revealPassword:!1})},s.prototype.focus=function(){if(this.input){this.input.focus();var t=this.input.value.length;t&&(this.input.type==="email"?(this.input.type="text",this.input.setSelectionRange(t,t),this.input.type="email"):this.input.setSelectionRange(t,t))}},s.prototype.resetValue=function(){var t,e;return O(this,void 0,void 0,function(){var n,a,i,u,r,o,d,l,c,m=this;return N(this,function(g){switch(g.label){case 0:return n=this.props,a=n.onChange,i=n.dispatchEvent,u=n.resetValue,r=n.formStore,o=n.store,d=n.name,l=(e=ke((t=r==null?void 0:r.pristine)!==null&&t!==void 0?t:o==null?void 0:o.pristine,d))!==null&&e!==void 0?e:u,[4,i("change",w(this.props,{value:l}))];case 1:return c=g.sent(),c!=null&&c.prevented?[2]:(a(l),this.setState({inputValue:l},function(){m.loadAutoComplete()}),[2])}})})},s.prototype.clearValue=function(){return O(this,void 0,void 0,function(){var t,e,n,a,i,u,r,o=this;return N(this,function(d){switch(d.label){case 0:return t=this.props,e=t.onChange,n=t.dispatchEvent,a=t.clearValueOnEmpty,i=this.props.resetValue,a&&i===""&&(i=void 0),[4,n("clear",w(this.props,{value:i}))];case 1:return u=d.sent(),u!=null&&u.prevented?[2]:[4,n("change",w(this.props,{value:i}))];case 2:return r=d.sent(),r!=null&&r.prevented?[2]:(e(i),this.setState({inputValue:i},function(){o.loadAutoComplete()}),[2])}})})},s.prototype.removeItem=function(t){var e=this.props,n=e.selectedOptions,a=e.onChange,i=n.concat();i.splice(t,1),a(this.normalizeValue(i))},s.prototype.handleClick=function(){return O(this,void 0,void 0,function(){var t,e,n,a;return N(this,function(i){switch(i.label){case 0:return t=this.props,e=t.dispatchEvent,n=t.value,[4,e("click",w(this.props,{value:n}))];case 1:return a=i.sent(),a!=null&&a.prevented?[2]:(this.state.isFocused||this.focus(),this.setState({isOpen:!0}),[2])}})})},s.prototype.handleFocus=function(t){return O(this,void 0,void 0,function(){var e,n,a,i,u;return N(this,function(r){switch(r.label){case 0:return e=this.props,n=e.dispatchEvent,a=e.onFocus,i=e.value,this.setState({isOpen:!0,isFocused:!0}),[4,n("focus",w(this.props,{value:i}))];case 1:return u=r.sent(),u!=null&&u.prevented?[2]:(a==null||a(t),[2])}})})},s.prototype.handleBlur=function(t){return O(this,void 0,void 0,function(){var e,n,a,i,u,r,o,d=this;return N(this,function(l){switch(l.label){case 0:return e=this.props,n=e.onBlur,a=e.trimContents,i=e.value,u=e.onChange,r=e.dispatchEvent,this.setState({isFocused:!1},function(){if(a&&i&&typeof i=="string"){var c=i.trim();d.input&&(d.input.value=c),u(c)}}),[4,r("blur",w(this.props,{value:i}))];case 1:return o=l.sent(),o!=null&&o.prevented?[2]:(n&&n(t),[2])}})})},s.prototype.close=function(){this.setState({isFocused:!1})},s.prototype.handleInputChange=function(t){return O(this,void 0,void 0,function(){var e,n,a,i,u,r,o,d=this;return N(this,function(l){switch(l.label){case 0:return e=this.transformValue(t.currentTarget.value),n=this.props,a=n.creatable,i=n.multiple,u=n.onChange,r=n.dispatchEvent,[4,r("change",w(this.props,{value:e}))];case 1:return o=l.sent(),o!=null&&o.prevented?[2]:(this.setState({inputValue:e},function(){a!==!1&&!i&&(u==null||u(e)),d.loadAutoComplete()}),[2])}})})},s.prototype.handleKeyDown=function(t){var e;return O(this,void 0,void 0,function(){var n,a,i,u,r,o,d,c,l,c,m;return N(this,function(g){switch(g.label){case 0:return n=this.props,a=n.selectedOptions,i=n.onChange,u=n.multiple,r=n.creatable,o=n.dispatchEvent,d=((e=this.props)===null||e===void 0?void 0:e.valueField)||"value",a.length&&!this.state.inputValue&&t.keyCode===8?(t.preventDefault(),c=a.concat(),c.pop(),i(this.normalizeValue(c)),this.setState({inputValue:""},this.loadAutoComplete),[3,4]):[3,1];case 1:return t.key==="Enter"&&this.state.inputValue&&typeof this.highlightedIndex!="number"&&r!==!1?(t.preventDefault(),l=this.state.inputValue,u&&l&&(Ae(a,function(_){return _[d]==l})?l=this.normalizeValue(a).concat():(c=a.concat(),c.push({label:l,value:l}),l=this.normalizeValue(c).concat())),[4,o("enter",w(this.props,{value:l}))]):[3,3];case 2:return m=g.sent(),m!=null&&m.prevented?[2]:(i(l),this.setState({inputValue:u?"":l,isOpen:!1},this.loadAutoComplete),[3,4]);case 3:t.key==="Enter"&&this.state.isOpen&&typeof this.highlightedIndex!="number"&&this.setState({isOpen:!1}),g.label=4;case 4:return[2]}})})},s.prototype.handleChange=function(t){var e=this.props,n=e.onChange,a=e.multiple,i=e.options,u=e.selectedOptions,r=e.creatable,o=e.valueField,d=i.find(function(c){return c[o||"value"]===t});if(a){var l=u.concat();d&&l.push(d),n(this.normalizeValue(l))}else n(d?this.normalizeValue(d):t);(a||r===!1)&&this.setState({inputValue:""},this.loadAutoComplete)},s.prototype.handleStateChange=function(t){var e=this.props.creatable,n=this.props.multiple||this.props.multi;switch(t.type){case re.stateChangeTypes.itemMouseEnter:this.setState({isOpen:!0});break;case re.stateChangeTypes.changeInput:this.setState({isOpen:!0});break;default:var a={};typeof t.isOpen<"u"&&(a.isOpen=t.isOpen),typeof t.highlightedIndex<"u"&&(this.highlightedIndex=t.highlightedIndex),!n&&e===!1&&this.state.isOpen&&t.isOpen===!1&&(a.inputValue=""),this.setState(a);break}},s.prototype.handleNormalInputChange=function(t){return O(this,void 0,void 0,function(){var e,n,a,i,u,r,o;return N(this,function(d){switch(d.label){case 0:return e=this.props,n=e.onChange,a=e.dispatchEvent,i=e.trimContents,u=e.clearValueOnEmpty,r=this.transformValue(t.currentTarget.value),typeof r=="string"&&(i&&(r=r.trim()),u&&r===""&&(r=void 0)),[4,a("change",w(this.props,{value:r}))];case 1:return o=d.sent(),o!=null&&o.prevented?[2]:(n(r),[2])}})})},s.prototype.normalizeValue=function(t){var e=this.props,n=e.multiple,a=e.delimiter,i=e.joinValues,u=e.extractValue,r=e.valueField,o=Array.isArray(t)?t:t?[t]:[];if(i)return o.map(function(l){return l[r||"value"]}).join(a||",");if(u){var d=o.map(function(l){return l[r||"value"]});return n?d:d[0]}else return n?o:o[0]},s.prototype.transformValue=function(t){var e=this.props.transform;return e&&Object.keys(e).forEach(function(n){var a=e[n];switch(n){case"lowerCase":a&&(t=t.toLowerCase());break;case"upperCase":a&&(t=t.toUpperCase());break}}),t},s.prototype.loadAutoComplete=function(){var t=this.props,e=t.formItem,n=t.autoComplete,a=t.data;ce(n,a)&&e&&e.loadOptions(n,le(a,{term:this.state.inputValue||""}),{extendsOptions:!0})},s.prototype.reload=function(){var t=this.props.reloadOptions;t&&t()},s.prototype.valueToString=function(t){return typeof t>"u"||t===null?"":typeof t=="string"?t:t instanceof Date?t.toISOString():JSON.stringify(t)},s.prototype.getTarget=function(){var t;return(t=this.input)===null||t===void 0?void 0:t.parentElement},s.prototype.renderSugestMode=function(){var t=this,e,n=this.props,a=n.className;n.style;var i=n.inputControlClassName,u=n.nativeInputClassName,r=n.inputOnly,o=n.value,d=n.placeholder,l=n.classnames,c=n.disabled,m=n.readOnly,g=n.name,_=n.loading,j=n.clearable,F=n.options,S=n.selectedOptions,k=n.autoComplete,b=n.labelField,h=n.valueField,E=n.multiple,x=n.creatable,A=n.borderMode,U=n.showCounter,Z=n.data,T=n.maxLength,ee=n.minLength,q=n.translate,W=n.loadingConfig,J=n.popOverContainer,Q=n.themeCss,V=n.css,z=n.id,Ce=n.nativeAutoComplete,te=n.testIdBuilder,ge=(e=this.props.type)===null||e===void 0?void 0:e.replace(/^(?:native|input)\-/,"");return p(re,{isOpen:this.state.isOpen&&!c&&!m,inputValue:this.state.inputValue,onChange:this.handleChange,onStateChange:this.handleStateChange,selectedItem:S.map(function(P){return P[h||"value"]}),children:function(P){var K,ne,ae,ye=P.getInputProps,be=P.getItemProps,H=P.isOpen,Y=P.inputValue,ie=P.selectedItem,xe=P.highlightedIndex,R=Y&&H&&!k?he(F,Y,{keys:[b||"label",h||"value"],threshold:he.rankings.CONTAINS}):F,Oe=H?Re(R,ie):{};R=R.filter(function(C){return!~ie.indexOf(C.value)}),t.state.inputValue&&x!==!1&&E&&!R.some(function(C){return C.value===t.state.inputValue})&&!~ie.indexOf(t.state.inputValue)&&R.push((K={},K[b||"label"]=t.state.inputValue,K[h||"value"]=t.state.inputValue,K.isNew=!0,K));var pe=$(d,Z);return I("div",{...v({className:l("TextControl-input TextControl-input--withAC",i,M(v(v({},t.props),{name:"inputControlClassName",id:z,themeCss:Q||V})),M(v(v({},t.props),{name:"inputControlClassName",id:z,themeCss:Q||V,extra:"inner"})),r?a:"",(ne={"is-opened":H,"TextControl-input--multiple":E},ne["TextControl-input--border".concat(ve(A))]=A,ne)),onClick:t.handleClick},te==null?void 0:te.getTestId()),children:[I(me,{children:[pe&&!S.length&&!t.state.inputValue&&!t.state.isFocused?p("div",{className:l("TextControl-placeholder"),children:pe}):null,S.map(function(C,B){return E?I("div",{className:l("TextControl-value"),children:[p(we,{className:l("TextControl-valueLabel"),tooltip:"".concat(C[b||"label"]),children:"".concat(C[b||"label"])}),p(L,{icon:"close",className:l("TextControl-valueIcon","icon"),onClick:t.removeItem.bind(t,B)})]},B):Y&&H||x!==!1?null:p("div",{className:l("TextControl-value"),children:C.label},B)}),p(fe,{...v({},ye({name:g,ref:t.inputRef,disabled:c,readOnly:m,type:ge,onFocus:t.handleFocus,onBlur:t.handleBlur,onChange:t.handleInputChange,onKeyDown:t.handleKeyDown,maxLength:T,minLength:ee}),{autoComplete:Ce,size:10,className:l(u)})})]}),j&&!c&&!m&&o?p("a",{onClick:t.clearValue,className:l("TextControl-clear"),children:p(L,{icon:"input-clear",className:"icon",iconContent:"InputText-clear"})}):null,U?p("span",{className:l("TextControl-counter"),children:"".concat((ae=t.valueToString(o))===null||ae===void 0?void 0:ae.length).concat(typeof T=="number"&&T?"/".concat(T):"")}):null,_?p(Te,{show:!0,icon:"reload",size:"sm",spinnerClassName:l("TextControl-spinner"),loadingConfig:W}):null,p(Ve,{container:J||t.getTarget,target:t.getTarget,show:!!(H&&R.length),children:p(Ie,{className:l("TextControl-popover"),style:{width:t.input?t.input.parentElement.offsetWidth:"auto"},children:p("div",{className:l("TextControl-sugs"),children:R.map(function(C){var B=C[b||"label"],se=C[h||"value"];return p("div",{...v({},be({item:se,disabled:C.disabled,className:l("TextControl-sugItem",{"is-highlight":xe===Oe[se],"is-disabled":C.disabled||C.readOnly})}),{key:se}),children:C.isNew?I("span",{children:[q("Text.add",{label:B}),p(L,{icon:"enter",className:"icon"})]}):I("span",{children:[C.disabled?B:Se(B,Y),C.tip]})})})})})})]})}})},s.prototype.toggleRevealPassword=function(){return O(this,void 0,void 0,function(){var t,e,n,a,i;return N(this,function(u){switch(u.label){case 0:return t=this.props,e=t.dispatchEvent,n=t.value,a=this.state.revealPassword?"encrypt":"review",[4,e(a,w(this.props,{value:n}))];case 1:return i=u.sent(),i!=null&&i.prevented||i!=null&&i.stoped?[2]:(this.setState({revealPassword:!this.state.revealPassword}),[2])}})})},s.prototype.renderNormal=function(){var t,e,n,a=this.props;a.classPrefix;var i=a.classnames,u=a.className;a.style;var r=a.inputControlClassName,o=a.nativeInputClassName,d=a.inputOnly,l=a.value,c=a.placeholder;a.onChange;var m=a.disabled,g=a.readOnly,_=a.max,j=a.min,F=a.step,S=a.clearable,k=a.revealPassword,b=k===void 0?!0:k,h=a.name,E=a.borderMode,x=a.prefix,A=a.suffix,U=a.data,Z=a.showCounter,T=a.maxLength,ee=a.minLength,q=a.themeCss,W=a.css,J=a.id,Q=a.nativeAutoComplete,V=a.testIdBuilder,z=(e=this.props.type)===null||e===void 0?void 0:e.replace(/^(?:native|input)\-/,"");return I("div",{...v({className:i("TextControl-input",(t={},t["TextControl-input--border".concat(ve(E))]=E,t),M(v(v({},this.props),{name:"inputControlClassName",id:J,themeCss:q||W})),M(v(v({},this.props),{name:"inputControlClassName",id:J,themeCss:q||W,extra:"inner"})),r,d?u:"")},V==null?void 0:V.getTestId()),children:[x?p("span",{className:i("TextControl-inputPrefix"),children:$(x,U)}):null,p(fe,{...v({name:h,placeholder:$(c,U),ref:this.inputRef,disabled:m,readOnly:g,type:this.state.revealPassword?"text":z,onFocus:this.handleFocus,onBlur:this.handleBlur,max:_,min:j,maxLength:T,minLength:ee,autoComplete:Q,size:10,step:F,onChange:this.handleNormalInputChange,value:this.valueToString(l),className:i(o,{"TextControl-input-password":z==="password"&&b})},V==null?void 0:V.getChild("input").getTestId())}),S&&!m&&!g&&l?p("a",{onClick:this.clearValue,className:i("TextControl-clear"),children:p(L,{icon:"input-clear",className:"icon",iconContent:"InputText-clear"})}):null,z==="password"&&b&&!m?p("a",{onClick:this.toggleRevealPassword,className:i("TextControl-revealPassword"),children:this.state.revealPassword?p(L,{icon:"view",className:i("TextControl-icon-view"),classNameProp:i("TextControl-icon-view"),iconContent:"InputText-view"}):p(L,{icon:"invisible",className:i("TextControl-icon-invisible"),classNameProp:i("TextControl-icon-invisible"),iconContent:"InputText-invisible"})}):null,Z?p("span",{className:i("TextControl-counter"),children:"".concat((n=this.valueToString(l))===null||n===void 0?void 0:n.length).concat(typeof T=="number"&&T?"/".concat(T):"")}):null,A?p("span",{className:i("TextControl-inputSuffix"),children:$(A,U)}):null]})},s.prototype.renderBody=function(t){var e,n,a=this.props,i=a.classnames,u=a.className,r=a.style,o=a.classPrefix,d=a.addOn,l=a.render,c=a.data,m=a.disabled,g=a.readOnly,_=a.inputOnly,j=a.static,F=a.addOnClassName,S=a.themeCss,k=a.css,b=a.id,h=typeof d=="string"?{label:d,type:"plain"}:d,E=p(L,{cx:i,icon:h==null?void 0:h.icon,className:"Icon"}),x=h&&!j?h.actionType||~["button","submit","reset","action"].indexOf(h.type)?p("div",{className:i("".concat(o,"TextControl-button"),F,M(v(v({},this.props),{name:"addOnClassName",id:b,themeCss:S||k,extra:"addOn"}))),children:l("addOn",h,{disabled:m})}):I("div",{className:i("".concat(o,"TextControl-addOn"),F,M(v(v({},this.props),{name:"addOnClassName",id:b,themeCss:S||k,extra:"addOn"}))),children:[E,h.label?$(h.label,c):null]}):null;if(_)return t;var A=j?i("".concat(o,"TextControl"),(n={},n["".concat(o,"TextControl--withAddOn")]=!!x,n)):i(u,"".concat(o,"TextControl"),(e={},e["".concat(o,"TextControl--withAddOn")]=!!x,e["is-focused"]=this.state.isFocused,e["is-disabled"]=m||g,e));return I("div",{className:A,style:r,children:[h&&h.position==="left"?x:null,t,h&&h.position!=="left"?x:null]})},s.prototype.render=function(){var t=this.props,e=t.options,n=t.source,a=t.autoComplete,i=t.themeCss,u=t.css,r=t.id,o=t.env,d=t.classPrefix,l=a!==!1&&(n||e!=null&&e.length||a)?this.renderSugestMode():this.renderNormal();return I(me,{children:[this.renderBody(l),p(oe,{...v({},this.props,{config:{themeCss:i||u,classNames:[{key:"inputControlClassName",weights:{focused:{parent:".".concat(d,"TextControl.is-focused")},disabled:{parent:".".concat(d,"TextControl.is-disabled")}}}],id:r},env:o})}),p(oe,{...v({},this.props,{config:{themeCss:Ee(i||u),classNames:[{key:"inputControlClassName",weights:{default:{inner:"input"},hover:{inner:"input"},focused:{parent:".".concat(d,"TextControl.is-focused"),inner:"input"},disabled:{parent:".".concat(d,"TextControl.is-disabled"),inner:"input"}}}],id:r&&r+"-inner"},env:o})}),p(oe,{...v({},this.props,{config:{themeCss:i||u,classNames:[{key:"addOnClassName"}],id:r&&r+"-addOn"},env:o})})]})},s.defaultProps={resetValue:"",labelField:"label",valueField:"value",placeholder:"",allowInputText:!0,trimContents:!0,nativeAutoComplete:"off"},D([G,y("design:type",Function),y("design:paramtypes",[]),y("design:returntype",void 0)],s.prototype,"close",null),D([G,y("design:type",Function),y("design:paramtypes",[Object]),y("design:returntype",Promise)],s.prototype,"handleNormalInputChange",null),D([G,y("design:type",Function),y("design:paramtypes",[]),y("design:returntype",void 0)],s.prototype,"getTarget",null),D([G,Pe(),y("design:type",Function),y("design:paramtypes",[]),y("design:returntype",Object)],s.prototype,"render",null),s}(_e.PureComponent);function Re(f,s,t){return t===void 0&&(t="value"),f.filter(function(e){return s.indexOf(e[t||"value"])===-1}).reduce(function(e,n,a){return e[n[t||"value"]]=a,e},{})}var Le=function(f){X(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s=D([ue({type:"input-text",alias:["input-password","native-date","native-time","native-number"]})],s),s}(de),De=function(f){X(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s=D([ue({type:"input-email",validations:"isEmail"})],s),s}(de),je=function(f){X(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s=D([ue({type:"input-url",validations:"isUrl"})],s),s}(de);export{De as EmailControlRenderer,Le as TextControlRenderer,je as UrlControlRenderer,de as default,Re as mapItemIndex};
